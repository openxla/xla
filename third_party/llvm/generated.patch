Auto generated patch. Do not edit or delete it, even if empty.
diff -ruN --strip-trailing-cr a/mlir/lib/IR/BuiltinDialectBytecode.cpp b/mlir/lib/IR/BuiltinDialectBytecode.cpp
--- a/mlir/lib/IR/BuiltinDialectBytecode.cpp
+++ b/mlir/lib/IR/BuiltinDialectBytecode.cpp
@@ -168,12 +168,11 @@
   // cheap.
   size_t numElements = type.getNumElements();
   size_t packedSize = llvm::divideCeil(numElements, 8);
-  if (blob.size() == packedSize && blob.size() != numElements &&
-      blob.size() != 1) {
+  if (blob.size() == packedSize && blob.size() != numElements) {
     // Unpack the blob.
     rawData.resize(numElements);
     for (size_t i = 0; i < numElements; ++i)
-      rawData[i] = (blob[i / 8] & (1 << (i % 8))) ? 0xFF : 0x00;
+      rawData[i] = (blob[i / 8] & (1 << (i % 8))) ? 1 : 0;
     return success();
   }
   // Otherwise, fallback to the default behavior.
diff -ruN --strip-trailing-cr a/mlir/test/Bytecode/i1_roundtrip.mlir b/mlir/test/Bytecode/i1_roundtrip.mlir
--- a/mlir/test/Bytecode/i1_roundtrip.mlir
+++ b/mlir/test/Bytecode/i1_roundtrip.mlir
@@ -0,0 +1,45 @@
+// RUN: mlir-opt %s -emit-bytecode | mlir-opt | FileCheck %s
+
+// CHECK-LABEL: func.func @test_i1_splat_true
+func.func @test_i1_splat_true() -> tensor<100xi1> {
+// CHECK: arith.constant dense<true> : tensor<100xi1>
+  %0 = arith.constant dense<true> : tensor<100xi1>
+  return %0 : tensor<100xi1>
+}
+
+
+// CHECK-LABEL: func.func @test_i1_splat_false
+func.func @test_i1_splat_false() -> tensor<100xi1> {
+// CHECK: arith.constant dense<false> : tensor<100xi1>
+  %0 = arith.constant dense<false> : tensor<100xi1>
+  return %0 : tensor<100xi1>
+}
+
+
+// CHECK-LABEL: func.func @test_8xi1_splat_true
+func.func @test_8xi1_splat_true() -> tensor<8xi1> {
+// CHECK: arith.constant dense<true> : tensor<8xi1>
+  %0 = arith.constant dense<true> : tensor<8xi1>
+  return %0 : tensor<8xi1>
+}
+
+// CHECK-LABEL: func.func @test_8xi1_splat_false
+func.func @test_8xi1_splat_false() -> tensor<8xi1> {
+// CHECK: arith.constant dense<false> : tensor<8xi1>
+  %0 = arith.constant dense<false> : tensor<8xi1>
+  return %0 : tensor<8xi1>
+}
+
+// CHECK-LABEL: func.func @test_i8_mixed()
+func.func @test_i8_mixed() {
+  // CHECK: arith.constant dense<[true, false, true, false, true, false, true, false]> : tensor<8xi1>
+  %0 = arith.constant dense<[true, false, true, false, true, false, true, false]> : tensor<8xi1>
+  return
+}
+
+// CHECK-LABEL: func.func @test_i9_mixed()
+func.func @test_i9_mixed() {
+  // CHECK: arith.constant dense<[true, false, true, false, true, false, true, false, true]> : tensor<9xi1>
+  %0 = arith.constant dense<[true, false, true, false, true, false, true, false, true]> : tensor<9xi1>
+  return
+}
diff -ruN --strip-trailing-cr a/mlir/test/Bytecode/i1_splat_roundtrip.mlir b/mlir/test/Bytecode/i1_splat_roundtrip.mlir
--- a/mlir/test/Bytecode/i1_splat_roundtrip.mlir
+++ b/mlir/test/Bytecode/i1_splat_roundtrip.mlir
@@ -1,17 +0,0 @@
-// RUN: mlir-opt %s -emit-bytecode | mlir-opt | FileCheck %s
-
-func.func @test_i1_splat_true() -> tensor<100xi1> {
-  %0 = arith.constant dense<true> : tensor<100xi1>
-  return %0 : tensor<100xi1>
-}
-
-// CHECK-LABEL: func.func @test_i1_splat_true
-// CHECK: arith.constant dense<true> : tensor<100xi1>
-
-func.func @test_i1_splat_false() -> tensor<100xi1> {
-  %0 = arith.constant dense<false> : tensor<100xi1>
-  return %0 : tensor<100xi1>
-}
-
-// CHECK-LABEL: func.func @test_i1_splat_false
-// CHECK: arith.constant dense<false> : tensor<100xi1>
